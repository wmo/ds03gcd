# Introduction 

The data analysed is the [Human Activity Recognition Using Smartphones Data Set](http://archive.ics.uci.edu/ml/datasets/Human+Activity+Recognition+Using+Smartphones), in which 30 volunteers performed 6 activities ( walking, sitting,...) while wearing on their waist a smarthphone which recorded the data of the accelerometer and gyroscope. 

The data-file can be downloaded here : [d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip](https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip)

### Acknowledgement 

Davide Anguita, Alessandro Ghio, Luca Oneto, Xavier Parra and Jorge L. Reyes-Ortiz. Human Activity Recognition on Smartphones using a Multiclass Hardware-Friendly Support Vector Machine. International Workshop of Ambient Assisted Living (IWAAL 2012). Vitoria-Gasteiz, Spain. Dec 2012

This dataset is distributed AS-IS and no responsibility implied or explicit can be addressed to the authors or their institutions for its use or misuse. Any commercial use is prohibited.

# Quick start

Note: the script takes care of downloading and caching the datafile. 

- Clone this repository: `git clone https://github.com/wmo/ds03gcd`
- Go to the directory: `cd ds03gcd`
- startup R and enter: `source "run_analysis.R"`
- after a while of huffing and puffing, you get the final tidy dataset in dataframe `df`

The dataframe will look like this, when viewed in RStudio: 

![](sample_snap.png)

It has these dimensions: 180 observations of 75 variables.

See [codebook](codebook.md) for description of the datafields.

## Extras

The requested dataframe `df` contains the final, tidy data-set, but there are some extra dataframes created in the process, which may be of good use:

- `dfc` : the comprehensive dataframe, contains all columns, all data 
- `dfs` : the selective dataframe, is the same as `dfc` but with the feature columns whittled down to only *std* and *mean* 
- `dfnrw` : the narrow dataframe, which is a molten form of `dfs`, and which formed the basis to create the final `df` from.


Experimentation: for performance reasons you may want to play around with only a *subset* of the data. This can be easily done: change the variable `max_observations` to '125' (or lower) in the script. This gives a shorter load time, and makes it faster to do certain transformations.


# Preconditions

You should have an installation of R with following extra packages installed:

- plyr
- reshape2

The zipfile has should have these files in one of the subdirectories: 

- features.txt 
- subject_test.txt 
- y_test.txt 
- X_test.txt 
- subject_train.txt 
- y_train.txt 
- X_train.txt 


## Quick-fix to common problems

In case you run into this error: 'could not find function "mapvalues"', then install package `plyr`

In case you encounter this error: 'could not find function "melt"', then install package `reshape2`


# In detail 

The original tasks read as follows: You should create one R script called `run_analysis.R` that does the following.

1. Merges the training and the test sets to create one data set.
2. Extracts only the measurements on the mean and standard deviation for each measurement.
3. Uses descriptive activity names to name the activities in the data set
4. Appropriately labels the data set with descriptive variable names.
5. From the data set in step 4, creates a second, independent tidy data set with the average of each variable for each activity and each subject.


## Item 1: Merges the training and the test sets to create one data set. 

Result in : *dfc*  (the 'comprehensive' dataframe) 

This dataframe contains each and every record that is in the files, and captures all the information. 


## Item 2: Extracts only the measurements on the mean and standard deviation for each measurement.

Result in *dfs* (the 'selective' dataframe), which is basically the same as dfc, except has a lot less feature columns


## Item 3: Uses descriptive activity names to name the activities in the data set

The activity column contains the activity name. This column was already added in the first step, ie it is present in dataframes `dfc` and `dfs.


## Item 4: Appropriately labels the data set with descriptive variable names.

Also part of building `dfc`, the comprehensive dataframe, was to give the columns the correct names. 


## Item 5: from the data set in step 4, creates a second, independent tidy data set set with the average of each variable for each activity and each subject.

The result ends up in dataframe `df`.  
This result has been generated by first 'melting' the `dfs` dataframe to a narrow representation (dfnrw), and then splitting/applying/composing with plyr's ddply() and reshape2's dcast() functions. 





